
<!DOCTYPE html>
<html>
    <head>
        <!-- Google tag (gtag.js) -->
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}

            (function () {
                const KEY = "8dpc_cookie_consent_v1";
                let choice = null;

                try {
                    // "accept" | "reject" | null
                    choice = localStorage.getItem(KEY);
                } catch (e) {
                    choice = null;
                }

                // Default: deny non-essential storage until user chooses
                gtag("consent", "default", {
                    ad_storage: "denied",
                    analytics_storage: "denied",
                    ad_user_data: "denied",
                    ad_personalization: "denied",
                    wait_for_update: 500
                });

                // If previously accepted, grant immediately
                const hasConsent = (choice === "accept");
                if (hasConsent) {
                    gtag("consent", "update", {
                        ad_storage: "granted",
                        analytics_storage: "granted",
                        ad_user_data: "granted",
                        ad_personalization: "granted"
                    });
                }

                gtag("js", new Date());

                // Only send pageview automatically if accepted
                gtag("config", "G-FQ16MYVJQJ", {
                    send_page_view: hasConsent
                });
            })();
        </script>
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-FQ16MYVJQJ"></script>


        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>8D-PolComp{% block TITLE %}{% endblock %}</title>
        <meta name="author" content="8D-PolComp">
        <meta name="robots" content="index, follow">
        <meta name="description" content="Explore political beliefs across 8 dimensions with the 8D-PolComp Test. This free political compass test measures views on economics, social issues, and more. Get data-driven insights to understand your position on 8 ideological axes.">
        <link rel="shortcut icon" href="{{ url_for('static', filename='images/logo-round.ico') }}">
        <link rel="canonical" href="https://www.8dpolcomp.com{{ request.path }}">

        <!-- App CSS -->
        <link rel="stylesheet" href="{{ url_for('static', filename='css/app.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/ui.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/components.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/fonts.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/cookie-consent.css') }}">

        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100..800&family=Open+Sans:wght@300..700&display=swap" rel="stylesheet">

        <!-- Icons -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" rel="stylesheet">

        <!-- jQuery -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>

        {% block HEAD %}{% endblock %}
    </head>

    <body class="center-content">
        <div class="header center-content">
        {% include "layouts/header.html" %}
        </div>

        <div id="page" class="page center-content">
        {% block CONTENT %}{% endblock %}
        </div>

        <div class="footer center-content">
        {% include "layouts/footer.html" %}
        </div>

        <!-- Cookie banner -->
        <div id="cookie-banner" class="cookie-banner" hidden role="dialog" aria-live="polite" aria-label="Cookie notice">
            <div class="component-border cookie-banner-inner">
                <p class="text text-subtitle">Cookies</p>

                <p class="text">
                    8D-PolComp uses essential cookies for core functionality (including session state).
                    We may also use analytics and ads.
                </p>

                <p class="text">
                    Please review the
                    <span class="inline-link"><a class="link" href="/privacy">Privacy Policy</a></span>
                    and
                    <span class="inline-link"><a class="link" href="/terms">Terms</a></span>
                    before using the site.
                </p>

                <p class="text" style="font-weight: 600;">
                    Accepting enables analytics/ads cookies. Rejecting disables non-essential cookies.
                </p>

                <div class="cookie-btn-row">
                    <button type="button" id="cookie-accept" class="button blue-button">
                        <i class="fa-solid fa-check"></i>I Agree
                    </button>

                    <button type="button" id="cookie-reject" class="button grey-button">
                        <i class="fa-solid fa-xmark"></i>Reject Non-Essential
                    </button>
                </div>
            </div>
        </div>


        <script src="{{ url_for('static', filename='js/ui.js') }}"></script>
        <script src="{{ url_for('static', filename='js/cookie-consent.js') }}"></script>

        {% block SCRIPTS %}{% endblock %}
    </body>
</html>
